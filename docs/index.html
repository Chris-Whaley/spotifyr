<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pull Track Audio Features from the 'Spotify' Web API • spotifyr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Pull Track Audio Features from the 'Spotify' Web API">
<meta property="og:description" content="A wrapper for pulling track audio features from the
  'Spotify' Web API &lt;http://developer.spotify.com/web-api&gt; in bulk. 
  By automatically batching API requests, it allows you to enter an artist's 
  name and retrieve their entire discography in seconds, along with audio 
  features and track/album popularity metrics. You can also pull song and 
  playlist information for a given 'Spotify' user (including yourself!).">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">spotifyr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/charlie86/spotifyr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="spotifyr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#spotifyr" class="anchor"></a>spotifyr</h1></div>
<p><a href="https://cran.r-project.org/package=spotifyr"><img src="http://www.r-pkg.org/badges/version/spotifyr?color=green" alt="CRAN_Status_Badge"></a> <img src="http://cranlogs.r-pkg.org/badges/grand-total/spotifyr?color=green"></p>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>spotifyr is a wrapper for pulling track audio features and other information from Spotify’s Web API in bulk. By automatically batching API requests, it allows you to enter an artist’s name and retrieve their entire discography in seconds, along with Spotify’s audio features and track/album popularity metrics. You can also pull song and playlist information for a given Spotify User (including yourself!).</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Development version (recommended)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">'charlie86/spotifyr'</span>)</code></pre></div>
<p>The development version now imports the <code>geniusR</code> package from <a href="https://github.com/JosiahParry/geniusR">Josiah Parry</a>, which you can install with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">'JosiahParry/geniusR'</span>)</code></pre></div>
<p>(Note that this is separate from the <code>geniusr</code> package currently on CRAN)</p>
<p>CRAN version 1.0.0 (Note: this is somewhat outdated, as it takes extra time to submit and pass CRAN checks)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">'spotifyr'</span>)</code></pre></div>
</div>
<div id="authenication" class="section level2">
<h2 class="hasAnchor">
<a href="#authenication" class="anchor"></a>Authenication</h2>
<p>First, set up a Dev account with Spotify to access their Web API <a href="https://developer.spotify.com/my-applications/#!/applications">here</a>. This will give you your <code>Client ID</code> and <code>Client Secret</code>. Once you have those, you can pull your access token into R with <code>get_spotify_access_token</code>.</p>
<p>The easiest way to authenticate is to set your credentials to the System Environment variables <code>SPOTIFY_CLIENT_ID</code> and <code>SPOTIFY_CLIENT_SECRET</code>. The default arguments to <code>get_spotify_access_token</code> (and all other functions in this package) will refer to those. Alternatively, you can set them manually and make sure to explicitly refer to your access token in each subsequent function call.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.setenv</span>(<span class="dt">SPOTIFY_CLIENT_ID =</span> <span class="st">'xxxxxxxxxxxxxxxxxxxxx'</span>)
<span class="kw">Sys.setenv</span>(<span class="dt">SPOTIFY_CLIENT_SECRET =</span> <span class="st">'xxxxxxxxxxxxxxxxxxxxx'</span>)

access_token &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_spotify_access_token.html">get_spotify_access_token</a></span>()</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="what-was-the-beatles-favorite-key" class="section level3">
<h3 class="hasAnchor">
<a href="#what-was-the-beatles-favorite-key" class="anchor"></a>What was The Beatles’ favorite key?</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(spotifyr)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">beatles &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_artist_audio_features.html">get_artist_audio_features</a></span>(<span class="st">'the beatles'</span>)

<span class="kw">library</span>(tidyverse)
<span class="kw">count</span>(beatles, key_mode, <span class="dt">sort =</span> T)
<span class="co">#&gt; # A tibble: 22 x 2</span>
<span class="co">#&gt;    key_mode     n</span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;int&gt;</span>
<span class="co">#&gt;  1 C major     46</span>
<span class="co">#&gt;  2 D major     41</span>
<span class="co">#&gt;  3 G major     38</span>
<span class="co">#&gt;  4 A major     36</span>
<span class="co">#&gt;  5 E major     21</span>
<span class="co">#&gt;  6 F major     18</span>
<span class="co">#&gt;  7 A minor     11</span>
<span class="co">#&gt;  8 B minor     10</span>
<span class="co">#&gt;  9 E minor     10</span>
<span class="co">#&gt; 10 C# minor     9</span>
<span class="co">#&gt; # ... with 12 more rows</span></code></pre></div>
</div>
<div id="whats-the-most-joyful-joy-division-song" class="section level3">
<h3 class="hasAnchor">
<a href="#whats-the-most-joyful-joy-division-song" class="anchor"></a>What’s the most joyful Joy Division song?</h3>
<p>My favorite audio feature has to be “valence,” a measure of musical positivity.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">joy &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_artist_audio_features.html">get_artist_audio_features</a></span>(<span class="st">'joy division'</span>)

joy <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">arrange</span>(<span class="op">-</span>valence) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">select</span>(track_name, valence) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">head</span>(<span class="dv">10</span>)
<span class="co">#&gt; # A tibble: 10 x 2</span>
<span class="co">#&gt;    track_name                                    valence</span>
<span class="co">#&gt;    &lt;chr&gt;                                           &lt;dbl&gt;</span>
<span class="co">#&gt;  1 These Days                                      0.949</span>
<span class="co">#&gt;  2 Passover - 2007 Remastered Version              0.941</span>
<span class="co">#&gt;  3 Colony - 2007 Remastered Version                0.808</span>
<span class="co">#&gt;  4 Atrocity Exhibition - 2007 Remastered Version   0.787</span>
<span class="co">#&gt;  5 Wilderness                                      0.775</span>
<span class="co">#&gt;  6 Twenty Four Hours                               0.773</span>
<span class="co">#&gt;  7 A Means To An End - 2007 Remastered Version     0.752</span>
<span class="co">#&gt;  8 Interzone - 2007 Remastered Version             0.746</span>
<span class="co">#&gt;  9 She's Lost Control - 2007 Remastered Version    0.743</span>
<span class="co">#&gt; 10 Disorder - 2007 Remastered Version              0.740</span></code></pre></div>
<p>Now if only there was some way to plot joy…</p>
</div>
<div id="joyplot-of-the-emotional-rollercoasters-that-are-joy-divisions-albums" class="section level3">
<h3 class="hasAnchor">
<a href="#joyplot-of-the-emotional-rollercoasters-that-are-joy-divisions-albums" class="anchor"></a>Joyplot of the emotional rollercoasters that are Joy Division’s albums</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggjoy)
<span class="co">#&gt; Loading required package: ggridges</span>
<span class="co">#&gt; The ggjoy package has been deprecated. Please switch over to the</span>
<span class="co">#&gt; ggridges package, which provides the same functionality. Porting</span>
<span class="co">#&gt; guidelines can be found here:</span>
<span class="co">#&gt; https://github.com/clauswilke/ggjoy/blob/master/README.md</span>

<span class="kw">ggplot</span>(joy, <span class="kw">aes</span>(<span class="dt">x =</span> valence, <span class="dt">y =</span> album_name)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggjoy/topics/ggjoy">geom_joy</a></span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggjoy/topics/ggjoy">theme_joy</a></span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">"Joyplot of Joy Division's joy distributions"</span>, <span class="dt">subtitle =</span> <span class="kw">paste0</span>(<span class="st">"Based on valence pulled from Spotify's Web API with spotifyr"</span>))
<span class="co">#&gt; Picking joint bandwidth of 0.112</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" width="700"></p>
</div>
<div id="danceability-of-thom-yorke" class="section level3">
<h3 class="hasAnchor">
<a href="#danceability-of-thom-yorke" class="anchor"></a>Danceability of Thom Yorke</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magick)
<span class="kw">library</span>(lubridate)

tots &lt;-<span class="st"> </span><span class="kw">map_df</span>(<span class="kw">c</span>(<span class="st">'radiohead'</span>, <span class="st">'thom yorke'</span>, <span class="st">'atoms for peace'</span>), get_artist_audio_features)

non_studio_albums &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'OK Computer OKNOTOK 1997 2017'</span>, <span class="st">'TKOL RMX 1234567'</span>, <span class="st">'In Rainbows Disk 2'</span>, 
                       <span class="st">'Com Lag: 2+2=5'</span>, <span class="st">'I Might Be Wrong'</span>, <span class="st">'The Eraser Rmxs'</span>)

tots &lt;-<span class="st"> </span><span class="kw">filter</span>(tots, <span class="op">!</span>album_name <span class="op">%in%</span><span class="st"> </span>non_studio_albums)

album_names_label &lt;-<span class="st"> </span>tots <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">arrange</span>(album_release_date) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">label =</span> <span class="kw">str_glue</span>(<span class="st">'{album_name} ({year(album_release_year)})'</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">pull</span>(label) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>unique

plot_df &lt;-<span class="st"> </span>tots <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">select</span>(track_name, album_name, danceability, album_release_date) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">gather</span>(metric, value, <span class="op">-</span><span class="kw">c</span>(track_name, album_name, album_release_date))

p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(plot_df, <span class="kw">aes</span>(<span class="dt">x =</span> value, <span class="dt">y =</span> album_release_date)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_density_ridges</span>(<span class="dt">size =</span> .<span class="dv">1</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme_ridges</span>(<span class="dt">center_axis_labels =</span> <span class="ot">TRUE</span>, <span class="dt">grid =</span> <span class="ot">FALSE</span>, <span class="dt">font_size =</span> <span class="dv">6</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">face =</span> <span class="st">'bold'</span>, <span class="dt">size =</span> <span class="dv">14</span>, <span class="dt">hjust =</span> <span class="fl">1.25</span>),
          <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">hjust =</span> <span class="fl">1.1</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">'Have we reached peak Thom Yorke danceability?'</span>, <span class="st">'Song danceability by album - Radiohead, Thom Yorke, and Atoms for Peace'</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">'Song danceability'</span>, <span class="dt">y =</span> <span class="st">''</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>,.<span class="dv">25</span>,.<span class="dv">5</span>,.<span class="dv">75</span>,<span class="dv">1</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw">scale_y_discrete</span>(<span class="dt">labels =</span> album_names_label)

<span class="kw">ggsave</span>(p, <span class="dt">filename =</span> <span class="st">'img/danceplot.png'</span>, <span class="dt">width =</span> <span class="dv">5</span>, <span class="dt">height =</span> <span class="dv">3</span>)
background &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/magick/topics/editing">image_read</a></span>(<span class="st">'img/danceplot.png'</span>)
logo_raw &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/magick/topics/editing">image_read</a></span>(<span class="st">'img/thom_dance.gif'</span>)
frames &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(logo_raw), <span class="cf">function</span>(frame) {
    hjust &lt;-<span class="st"> </span><span class="dv">200</span><span class="op">+</span>(<span class="dv">100</span><span class="op">*</span>frame)
    <span class="kw"><a href="http://www.rdocumentation.org/packages/magick/topics/composite">image_composite</a></span>(background, logo_raw[frame], <span class="dt">offset =</span> <span class="kw">str_glue</span>(<span class="st">'+{hjust}+400'</span>))
})

<span class="kw"><a href="http://www.rdocumentation.org/packages/magick/topics/animation">image_animate</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/magick/topics/editing">image_join</a></span>(frames), <span class="dt">fps =</span> <span class="dv">5</span>, <span class="dt">loop =</span> <span class="dv">0</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.gif"><!-- --></p>
</div>
</div>
<div id="sentify-a-shiny-app" class="section level2">
<h2 class="hasAnchor">
<a href="#sentify-a-shiny-app" class="anchor"></a>Sentify: A Shiny app</h2>
<p>This <a href="http://rcharlie.net/sentify/">app</a>, powered by spotifyr, allows you to visualize the energy and valence (musical positivity) of all of Spotify’s artists and playlists.</p>
</div>
<div id="dope-stuff-other-people-have-done-with-spotifyr" class="section level2">
<h2 class="hasAnchor">
<a href="#dope-stuff-other-people-have-done-with-spotifyr" class="anchor"></a>Dope stuff other people have done with spotifyr</h2>
<p>The coolest thing about making this package has definitely been seeing all the awesome stuff other people have done with it. Here are a few examples:</p>
<p><a href="http://paulelvers.com/post/emotionsineuropeanmusic/">Sentiment analysis of musical taste: a cross-European comparison</a> - Paul Elvers</p>
<p><a href="https://caitlinhudon.com/2017/12/22/blue-christmas/">Blue Christmas: A data-driven search for the most depressing Christmas song</a> - Caitlin Hudon</p>
<p><a href="https://davidklaing.github.io/kendrick-lamar-data-science/">KendRick LamaR</a> - David K. Laing</p>
<p><a href="http://dataland.rbind.io/2017/11/07/vilken-%C3%A4r-kents-mest-deprimerande-lat/">Vilken är Kents mest deprimerande låt? (What is Kent’s most depressing song?)</a> - Filip Wästberg</p>
<p><a href="http://thesociety.ru/arcadefire">Чёрное зеркало Arcade Fire (Black Mirror Arcade Fire)</a> - TheSociety</p>
<p><a href="http://rr.sapo.pt/especial/112355/sente-se-triste-quando-ouve-amar-pelos-dois-nao-e-o-unico">Sente-se triste quando ouve “Amar pelos dois”? Não é o único (Do you feel sad when you hear “Love for both?” You’re not alone)</a> - Rui Barros, Renascença</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=spotifyr">https://​cloud.r-project.org/​package=spotifyr</a>
</li>
<li>Browse source code at <br><a href="http://github.com/charlie86/spotifyr">http://​github.com/​charlie86/​spotifyr</a>
</li>
<li>Report a bug at <br><a href="http://github.com/charlie86/spotifyr/issues">http://​github.com/​charlie86/​spotifyr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Charlie Thompson <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Charlie Thompson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
